# 测试文档

### 文档修改记录

| 时间 | 操作者 | 修改内容 | 版本号 |
| :-------: | :-------: | :------: | :----: |
| 2022年4月1日 | 郁博文 | 创建文档 | v1.0 |
| 2021年4月5日 | 郁博文 | 编写集成测试 | v1.1 |
| 2021年4月11日 | 郁博文 | 编写系统测试 | v1.2 |
| 2021年4月21日 | 郁博文 | 编写单元测试 | v1.3 |
| 2021年4月21日 | 郁博文 | 完成测试文档 | v2.1 |

## 测试用例设计思路

首先，我们主要将原项目中各种list重构为了两个抽象的大类，分别是DictList和DictMap，对应了不同的功能。其次，我们将主类中不同的交互模式用命令模式进行了重构，同时，对于输入文件的命令，我们还编写了对应的策略模式用于执行对应动作。最后，我们重构了paragraph等具体实现细节大类。

因此，在设计测试用例时，我们秉承如下思路：首先，我们需要对重构的类进行测试，这就对应了两个大的测试包：commandTest和DictListTest,DictMapTest.但是，由于Paragraph等类我们也重构了，所以这些类也需要编写测试用例，但是要覆盖这些类的各个成员方法十分困难。同时，由于这些类的具体实现细节已经在前面两个大的测试类中体现了，所以综合考量，对于Paragraph等大类的测试，我们选择了在上文提到的两大类中体现。

最后我们还设计了系统测试SentistrengthTest.在这个测试类中，我们从系统整体出发，从外部提供一个完整的交互命令来判断输出正确性，从而测试了项目的总体功能。

## 单元测试用例

| 编号 | 方法名 | 覆盖流程 | 输入 | 预期输出 | 实际输出 |
| :---: | :----- | :---: | :----: | :-----: | ----- |
| TU1-1  | CmdCommandTest.testAction                      |                给定cmd选项，进行命令行式交互                 |                 I love you\nI hate you\n@end                 |                      3 -1 1\n1 -4 -1\n                       | 3 -1 1\n1 -4 -1\n                                            |
| TU2-1  | InputCommandTest.testClassifyAllLineStrategy   |         给定分类策略和输入文件位置，进行情感得分计算         |              包含I love you\nI hate you\n的文件              |        包含内容1 I love you\n-1 I l hate you\n的文件         | 包含内容1 I love you\n-1 I l hate you\n的文件                |
| TU2-2  | InputCommandTest.testFileExtension             | 给定分类策略和输入文件位置和文件结果后缀名，进行情感得分计算 |    包含I love you\nI hate you\n的文件，后缀名为_test.txt     | 包含内容1 I love you\n-1 I l hate you\n的文件，后缀为_test.txt | 包含内容1 I love you\n-1 I l hate you\n的文件，后缀为_test.txt |
| TU2-3  | InputCommandTest.testOptimalStrategy1          | 给定优化策略和输入文件位置和文件结果后缀名，进行情感得分计算 | 包含I love you\nI hate you\nI eat a bird\nI like eating bird\n的文件 |                       一个优化结果文件                       | 一个优化结果文件                                             |
| TU2-4  | InputCommandTest.testOptimalStrategy2          | 给定优化策略和输入文件位置和文件结果后缀名，进行情感得分计算 |              包含I love you\nI hate you\n的文件              |                       一个优化结果文件                       | 一个优化结果文件                                             |
| TU2-5  | InputCommandTest.testTermWeightStrategy        | 给定TermWeight策略和输入文件位置和文件结果后缀名，进行情感得分计算 |              包含I love you\nI hate you\n的文件              |                       一个term列表文件                       | 一个term列表文件                                             |
| TU2-6  | InputCommandTest.testSaveWithIDStrategy        | 给定SaveWithID策略和输入文件位置和文件结果后缀名，进行情感得分计算 |              包含I love you\nI hate you\n的文件              |            包含love 1\nhate -1\n的新优化得分文件             | 包含love 1\nhate -1\n的新优化得分文件                        |
| TU2-7  | InputCommandTest.testAnnotationColStrategy     | 给定AnnotationCol策略和输入文件位置和文件结果后缀名，进行情感得分计算 |              包含I love you\nI hate you\n的文件              |           包含I love you 1\nI hate you -1\n的文件            | 包含I love you 1\nI hate you -1\n的文件                      |
| TU3-1  | StdInCommandTest.testAction1                   |    给定stdin选项，从标准输入流中读取输入进行情感得分计算     |                   I love you\nI hate you\n                   |                          3\t-1\t1\t                          | 3\t-1\t1\t                                                   |
| TU3-2  | StdInCommandTest.testAction2                   |    给定stdin选项，从标准输入流中读取输入进行情感得分计算     |                         I love you\n                         |                          3\t-1\t1\t                          | 3\t-1\t1\t                                                   |
| TU3-3  | StdInCommandTest.testAction3                   |    给定stdin选项，从标准输入流中读取输入进行情感得分计算     |                              空                              |                              空                              | 空                                                           |
| TU4-1  | TextCommandTest.testAction1                    |         给定text选项，读入一个字符串进行情感得分计算         |                          I+love+you                          |                           3 -1 1\n                           | 3 -1 1\n                                                     |
| TU4-2  | TextCommandTest.testAction2                    |         给定text选项，读入一个字符串进行情感得分计算         |                          I+hate+you                          |                          1 -4 -1\n                           | 1 -4 -1\n                                                    |
| TU5-1  | DicListTest.testCorrectSpellingsListInitialise |          给定correctspellinglist文件路径，加载list           |                 correctspellinglist文件路径                  |                             true                             | true                                                         |
| TU5-2  | DicListTest.testCorrectSpellingsListContain    | 给定correctspellinglist文件路径，检测list中是否包含特定单词  |                 correctspellinglist文件路径                  |                             true                             | true                                                         |
| TU6-1  | DicListTest.testIronyListInitialise            |               给定IronyList文件路径，加载list                |                      IronyListt文件路径                      |                             true                             | true                                                         |
| TU6-2  | DicListTest.testIronyListContain               |      给定IronyList文件路径，检测list中是否包含特定单词       |                      IronyList文件路径                       |                             true                             | true                                                         |
| TU7-1  | DicListTest.testNegatingWordListtInitialise    |            给定NegatingWordList文件路径，加载list            |                   NegatingWordList文件路径                   |                             true                             | true                                                         |
| TU7-2  | DicListTest.testNegatingWordListContain        |   给定NegatingWordList文件路径，检测list中是否包含特定单词   |                   NegatingWordList文件路径                   |                             true                             | trueTU5-1TU5-1                                               |
| TU8-1  | DicListTest.testQuestionWordsInitialise        |             给定QuestionWords文件路径，加载list              |                    QuestionWords文件路径                     |                             true                             | true                                                         |
| TU8-2  | DicListTest.testQuestionWordstContain          |    给定QuestionWords文件路径，检测list中是否包含特定单词     |                    QuestionWords文件路径                     |                             true                             | true                                                         |
| TU9-1  | DicMapTest.testInitialise                      |                  给定Map文件路径，加载list                   |                         Map文件路径                          |                             true                             | true                                                         |
| TU9-2  | DicMapTest.testGetStrength                     |         给定Map文件路径，检测list中是否包含特定单词          |                         Map文件路径                          |                             true                             | true                                                         |
| TU10-1 | ArgsTest.canGetArgs                            |                    给定args测试是否能读取                    |                           args列表                           |                             true                             | true                                                         |



## 系统测试用例

| 编号 |                             输入                             |                     预期输出                      | 实际输出 |
| :--: | :----------------------------------------------------------: | :-----------------------------------------------: | :------: |
| ST1  |                 基本命令参数和文本I love you                 |                      3 -1 1                       |   正确   |
| ST2  |                 基本命令参数和文本I hate you                 |                      1 -4 -1                      |   正确   |
| ST3  |                基本命令参数和文本I hate you!                 |                      1 -5 -1                      |   正确   |
| ST4  |                   基本命令参数和文本hate!                    |                      1 -5 -1                      |   正确   |
| ST5  |     基本命令参数和包含I love you\nI hate you\n内容的文件     |                  3 -1 1\n1 -4 -1                  |   正确   |
| ST6  | 基本命令参数和包含I love you\nI hate you\n内容的文件，文本拓展名为_test.txt |  内容为3 -1 1\n1 -4 -1，拓展名为_test.txt的文件   |   正确   |
| ST7  | 基本命令参数和包含I love you\nI hate you\n内容的文件，输出文件夹为testFolder | 内容为3 -1 1\n1 -4 -1，位于testFolder文件夹的文件 |   正确   |