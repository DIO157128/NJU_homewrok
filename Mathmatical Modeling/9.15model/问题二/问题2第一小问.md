## 问题二

#### 化学影响

通过查询相关文件，我们知道，有些氧化物成分在文物中是作为着色剂和辅助着色剂存在，且不参与风化相关的化学反应。他对于高钾和铅钡的分类及其亚类的分类毫无影响，只是会影响玻璃的颜色，如氧化锡、氧化锶等，所以，在研究这一问时，我们将氧化锡、氧化锶剔除了考虑范围，使得结果更符合化学常识。

### 第一小问

对于第二问第一小问分析分类规律，我们需要得出高钾和铅钡在哪种氧化物成分的差距明显，因此我们需要求出每种氧化物在两类玻璃中的距离值。这里我们用相对距离值p=abs（（W高钾-W铅钡）/（W高钾+W铅钡））。并且为了消除风化对于结果的影响，我们采用未风化的高钾和铅钡对照，风化的高钾和铅钡对照得出两个距离值，如下图

|                  | 未风化相对距离值 | 风化相对距离值 |
| ---------------- | ---------------- | -------------- |
| 二氧化硅(SiO2)   | 0.108645         | 0.598469       |
| 氧化钠(Na2O)     | 0.415379         | 1              |
| 氧化锡(SnO2)     | 0.617402         | 1              |
| 氧化铜(CuO)      | 0.262796         | 0.634538       |
| 二氧化硫(SO2)    | 0.220339         | 1              |
| 氧化钙(CaO)      | 0.603052         | 0.48489        |
| 氧化锶(SrO)      | 0.73112          | 1              |
| 氧化铁(Fe2O3)    | 0.447924         | 0.558026       |
| 五氧化二磷(P2O5) | 0.144137         | 0.877238       |
| 氧化钡(BaO)      | 0.875348         | 1              |
| 氧化铅(PbO)      | 0.963402         | 1              |
| 氧化钾(K2O)      | 0.954198         | 0.187073       |
| 氧化镁(MgO)      | 0.255136         | 0.632112       |
| 氧化铝(Al2O3)    | 0.195368         | 0.172118       |

通过化学知识查询，我们知道有些氧化物成分在其中是作为着色剂和辅助着色剂存在，他对于高钾和铅钡的分类毫无影响，只是会影响玻璃的颜色，如氧化锡、氧化锶等，所以他们的相对距离值在一些情况下会等于一，我们需要将这类氧化物先进行筛除，得到下图

| 氧化物成分       | 未风化相对距离值 | 风化相对距离值 |
| ---------------- | ---------------- | -------------- |
| 二氧化硅(SiO2)   | 0.108645         | 0.598469       |
| 氧化钠(Na2O)     | 0.415379         | 1              |
| 氧化铜(CuO)      | 0.262796         | 0.634538       |
| 二氧化硫(SO2)    | 0.220339         | 1              |
| 氧化钙(CaO)      | 0.603052         | 0.48489        |
| 氧化铁(Fe2O3)    | 0.447924         | 0.558026       |
| 五氧化二磷(P2O5) | 0.144137         | 0.877238       |
| 氧化钡(BaO)      | 0.875348         | 1              |
| 氧化铅(PbO)      | 0.963402         | 1              |
| 氧化钾(K2O)      | 0.954198         | 0.187073       |
| 氧化镁(MgO)      | 0.255136         | 0.632112       |
| 氧化铝(Al2O3)    | 0.195368         | 0.172118       |

用未风化相对距离值、风化相对距离值这两个这项指标做topsis优劣解法得出影响值排名，如下图

|      索引值      | 正理想解距离（D+） | 负理想解距离（D-） | 综合得分指数 | 排序 |
| :--------------: | :----------------: | :----------------: | :----------: | :--: |
|  二氧化硅(SiO2)  |     0.44481815     |     0.12597721     |  0.22070468  |  11  |
|   氧化钠(Na2O)   |     0.27486119     |     0.28897544     |  0.51251626  |  5   |
|   氧化铜(CuO)    |     0.36760762     |     0.15699235     |  0.29926108  |  9   |
|  二氧化硫(SO2)   |     0.37268359     |     0.25095324     |  0.40240285  |  7   |
|   氧化钙(CaO)    |     0.23628496     |     0.26463197     |  0.52829512  |  4   |
|  氧化铁(Fe2O3)   |     0.28964921     |     0.20483777     |   0.414243   |  6   |
| 五氧化二磷(P2O5) |     0.41250069     |     0.2091063      |  0.33639631  |  8   |
|   氧化钡(BaO)    |     0.04416352     |     0.45575264     |  0.91165814  |  2   |
|   氧化铅(PbO)    |         0          |     0.49358503     |      1       |  1   |
|   氧化钾(K2O)    |     0.24024614     |     0.42411052     |  0.63837776  |  3   |
|   氧化镁(MgO)    |     0.37149083     |     0.1545054      |  0.29373861  |  10  |
|  氧化铝(Al2O3)   |     0.45631603     |     0.04349596     |  0.08702464  |  12  |

可以发现BaO、PbO、K2O对于高钾玻璃、铅钡玻璃的分类影响占比比较大。在化学上，这三项物质成分也是命名高钾，铅钡玻璃的关键因素。

### 第二小问

#### 数据处理

玻璃在严重风化时，二氧化硅含量会急剧下降，导致其他化学物质含量急剧上升，使得最终数据成为奇异值，需要去除以免对结果产生干扰。

同时，考虑到是否风化也是影响玻璃类型的一大重要因素，因此我们将高钾数据集和铅钡数据集分割成了风化和未风化两个部分分别研究。最终我们分出了如下数据集：

- 高钾-风化
- 高钾-未风化
- 铅钡-风化
- 铅钡-未风化

#### 研究过程

为了分出不同的亚类玻璃，我们采用分层聚类法。

由于我们是按照是否风化，将铅钡、高钾玻璃集细分为了四个数据集，但是对于同一类型的玻璃来说，是否风化是影响聚类结果的一个重要因素，但是并不能直接作为最后的一个亚类。换句话来说，按照上述四大数据集分别聚类后，我们仍然需要对同一玻璃类型但是不同风化情况的聚类数据进行合并。

为了进行合并，我们需要参考不按照是否风化分割数据集来直接进行聚类的结果，即我们需要对如下数据集进行聚类研究：

- 高钾
- 铅钡

##### 风化高钾聚类

![image-20220917234758686](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220917234758686.png)

根据聚类树状图，我们可以知道7、22、27和9、10、12为两类

##### 未风化高钾聚类

![image-20220917234941912](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220917234941912.png)

根据聚类树状图，我们可以知道03部位1、18、21为一类，剩下的文物为一类

##### 高钾聚类

![image-20220917235027624](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220917235027624.png)

根据总体的高钾聚类，我们将上述未风化高钾和风化高钾的聚类结果进行合并。

合并情况如下：

| 第一聚类 | 第二聚类 |
| -------- | -------- |
| 03部位1  | 1        |
| 7        | 03部位2  |
| 18       | 4        |
| 21       | 5        |
| 22       | 06部位1  |
| 27       | 06部位2  |
|          | 9        |
|          | 10       |
|          | 12       |
|          | 13       |
|          | 14       |
|          | 16       |

观察实际化学含量可知，第一聚类符合文献记载结果，我们将这一亚类命名为“高钾_低K2O_SiO2”

![image-20220918112019771](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220918112019771.png)

​																					聚类一和聚类二的化学成分对比（不考虑二氧化硅）

但是第二聚类中的部分文物，其化学成分含量具有明显的差异，例如9、10、12、06部位1的氧化钙含量很低，而其余文物的氧化钙含量较高。所以第二聚类并不能作为一个最终的亚类，需要进一步的拆分聚类。因此，我们将高钾第二聚类结果拆分成了高钾-第二聚类-未风化和高钾-第二聚类-风化这两个子数据集，参考上述步骤进行进一步聚类。

高钾-第二聚类-风化这个数据集只有三个结果：9、10、12，同时这三个文物记录也符合文献记录的数据结果，因此不对该数据集进行分层聚类

![image-20220918112652127](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220918112652127.png)

​																					聚类二和聚类三的化学成分对比（以所有数据除以二氧化硅的比重来统计）

对高钾-第二聚类-未风化进行分层聚类的结果如下：

![image-20220918000721088](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220918000721088.png)

可以看到，06部位1被作为一个单独的类分了出来，我们将它与9、10、12合并作为一个亚类，这也符合文献结果。

因此，最终的高钾亚类结果如下：

| 高钾_低K2O_SiO2 | 高钾_高K2O_SiO2 | 高钾_高K2O__高CaO_SiO2 |
| --------------- | --------------- | ---------------------- |
| 03部位1         | 06部位1         | 1                      |
| 7               | 9               | 03部位2                |
| 18              | 10              | 4                      |
| 21              | 12              | 5                      |
| 22              |                 | 06部位2                |
| 27              |                 | 13                     |
|                 |                 | 14                     |
|                 |                 | 16                     |

#### 合理性

为了验证该分类方法的合理性，我们对风化和未风化这两个数据集进行了验证，检验分层聚类方法是否能正确分出高钾和铅钡玻璃这两大类

以下分别是风化和未风化两大数据集的聚类树状图

![image-20220918002413348](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220918002413348.png)

![image-20220918002456874](C:\Users\dell\Desktop\9.15model\问题二\imgs\image-20220918002456874.png)

分出的两大聚类情况与题目中所给的分类情况基本一致，因此该分类方式合理。

#### 敏感性

由于合理性分析是将数据分类为高钾和铅钡玻璃，所以这是一个二分类问题。我们以高钾玻璃为正例，铅钡玻璃为反例，构建如下混淆矩阵：

|      | 真   | 假   | 合计 |
| ---- | ---- | ---- | ---- |
| 阳性 | 18   | 0    | 18   |
| 阴性 | 47   | 0    | 47   |
| 合计 | 65   | 0    | 65   |

| 准确率 | 召回率 | 精确率 | F1   |
| ------ | ------ | ------ | ---- |
| 1      | 1      | 1      | 1    |

● 准确率：预测正确样本占总样本的比例，准确率越大越好。
 ● 召回率：实际为正样本的结果中，预测为正样本的比例，召回率越大越好。
 ● 精确率：预测出来为正样本的结果中，实际为正样本的比例，精确率越大越好。
 ● F1：精确率和召回率的调和平均，精确率和召回率是互相影响的，虽然两者都高是一种期望的理想情况，然而实际中常常是精确率高、召回率就低，或者召回率低、但精确率高。若需要兼顾两者，那么就可以用F1指标。

由上表可知，分层分析的方法合理
